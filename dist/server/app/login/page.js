(()=>{var e={};e.id=2626,e.ids=[2626],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},50698:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(50482),a=s(69108),n=s(62563),o=s.n(n),l=s(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,43015)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\login\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,41524)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\login\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,15438)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\login\\page.tsx"],u="/login/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},21544:(e,t,s)=>{Promise.resolve().then(s.bind(s,89928))},35303:()=>{},89928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(95344),a=s(3729),n=s(8428),o=s(56506),l=s(52175),i=s(71206),c=s(47958),d=s(16212),u=s(92549),p=s(1586),m=s(61351),x=s(25092),g=s(14269);function h(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[s,h]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[b,j]=(0,a.useState)(!1),[v,w]=(0,a.useState)("");(0,a.useEffect)(()=>{"true"===t.get("logout")&&(0,x.Am)({title:"ออกจากระบบสำเร็จ",description:"คุณได้ออกจากระบบเรียบร้อยแล้ว"})},[t]);let N=async t=>{if(t.preventDefault(),w(""),k()){j(!0);try{console.log("กำลังพยายามเข้าสู่ระบบด้วย:",{email:s});let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:f}),credentials:"include"});console.log("สถานะการตอบกลับ:",t.status);let r=await t.json();if(console.log("ข้อมูลการตอบกลับ:",r),!t.ok)throw Error(r.error||"เกิดข้อผิดพลาดในการเข้าสู่ระบบ");"ผู้ดูแลระบบ"===r.user.role?(console.log("กำลังนำทางไปยังแดชบอร์ดผู้ดูแลระบบ"),e.push("/admin/dashboard")):(console.log("กำลังนำทางไปยังแดชบอร์ดผู้ใช้"),e.push("/user/dashboard"))}catch(e){console.error("เกิดข้อผิดพลาดในการเข้าสู่ระบบ:",e),w(e.message||"อีเมลหรือรหัสผ่านไม่ถูกต้อง")}finally{j(!1)}}},k=()=>{let e=!0,t={};return s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(t.email="กรุณากรอกอีเมลให้ถูกต้อง",e=!1):(t.email="กรุณากรอกอีเมล",e=!1),f?f.length<6&&(t.password="รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร",e=!1):(t.password="กรุณากรอกรหัสผ่าน",e=!1),w(Object.values(t).join("\n")||""),e};return(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100",children:[r.jsx(g.x,{}),(0,r.jsxs)(m.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(m.Ol,{className:"space-y-1 flex flex-col items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-2",children:r.jsx(l.Z,{className:"h-6 w-6 text-blue-600"})}),r.jsx(m.ll,{className:"text-2xl font-bold text-center",children:"เข้าสู่ระบบ"}),r.jsx(m.SZ,{className:"text-center",children:"เข้าสู่ระบบจองรถ Nozomi Enterprise"})]}),r.jsx(m.aY,{children:(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(p._,{htmlFor:"email",className:"flex items-center gap-2",children:[r.jsx(i.Z,{className:"h-4 w-4"}),"อีเมล"]}),r.jsx(u.I,{id:"email",type:"email",placeholder:"กรอกอีเมล",value:s,onChange:e=>h(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(p._,{htmlFor:"password",className:"flex items-center gap-2",children:[r.jsx(c.Z,{className:"h-4 w-4"}),"รหัสผ่าน"]}),r.jsx(u.I,{id:"password",type:"password",placeholder:"กรอกรหัสผ่าน",value:f,onChange:e=>y(e.target.value),required:!0})]}),v&&r.jsx("div",{className:"bg-red-100 text-red-600 text-sm p-3 rounded-md",children:v}),r.jsx(d.z,{type:"submit",disabled:b,className:"w-full",children:b?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]})}),r.jsx(m.eW,{className:"flex justify-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["ยังไม่มีบัญชี?"," ",r.jsx(o.default,{href:"/register",className:"text-blue-600 hover:underline",children:"ลงทะเบียน"})]})})]})]})}},92549:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var r=s(95344),a=s(3729),n=s(91626);let o=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));o.displayName="Input"},1586:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var r=s(95344),a=s(3729),n=s(14217),o=s(49247),l=s(91626);let i=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>r.jsx(n.f,{ref:s,className:(0,l.cn)(i(),e),...t}));c.displayName=n.f.displayName},52175:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},47958:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},71206:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},41524:(e,t,s)=>{"use strict";function r(){return null}s.r(t),s.d(t,{default:()=>r})},43015:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let r=(0,s(86843).createProxy)(String.raw`C:\xampp\htdocs\car-booking-system-110\car-booking-system-110\app\login\page.tsx`),{__esModule:a,$$typeof:n}=r,o=r.default},14217:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var r=s(3729),a=s(62409),n=s(95344),o=r.forwardRef((e,t)=>(0,n.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var l=o}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,1227,1476,2518,9135,896,3390,5279],()=>s(50698));module.exports=r})();