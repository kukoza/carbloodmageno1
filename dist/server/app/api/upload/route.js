"use strict";(()=>{var e={};e.id=5998,e.ids=[5998],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},71017:e=>{e.exports=require("path")},12022:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>Z,patchFetch:()=>b,requestAsyncStorage:()=>j,routeModule:()=>h,serverHooks:()=>x,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>F});var o={};t.r(o),t.d(o,{DELETE:()=>m,POST:()=>y});var a=t(95419),s=t(69108),i=t(99678),n=t(78070),u=t(73292),l=t(57147),c=t(71017),d=t.n(c),p=t(58719);let f=d().join(process.cwd(),"public/uploads/cars");async function g(){try{return(0,l.existsSync)(f)||(await (0,u.mkdir)(f,{recursive:!0}),console.log(`Created directory: ${f}`)),!0}catch(e){return console.error("Error creating upload directory:",e),!1}}async function y(e){try{if(!await g())return n.Z.json({error:"Could not create upload directory"},{status:500});let r=(await e.formData()).get("file");if(!r)return n.Z.json({error:"No file uploaded"},{status:400});let t=r.type;if(!t.startsWith("image/"))return n.Z.json({error:"File must be an image"},{status:400});let o=t.split("/")[1],a=`${(0,p.Z)()}.${o}`,s=d().join(f,a),i=await r.arrayBuffer();await (0,u.writeFile)(s,Buffer.from(i));let l=`/uploads/cars/${a}`;return console.log("File uploaded successfully:",{fileName:a,fileUrl:l,filePath:s,absolutePath:d().resolve(s)}),n.Z.json({success:!0,fileName:a,url:l})}catch(e){return console.error("Error uploading file:",e),n.Z.json({error:"Failed to upload file"},{status:500})}}async function m(e){try{let{searchParams:r}=new URL(e.url),o=r.get("fileName");if(!o)return n.Z.json({error:"File name is required"},{status:400});let a=d().join(f,o);if(!(0,l.existsSync)(a))return n.Z.json({error:"File not found"},{status:404});{let e=t(73292);return await e.unlink(a),n.Z.json({success:!0,message:"File deleted successfully"})}}catch(e){return console.error("Error deleting file:",e),n.Z.json({error:"Failed to delete file"},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\api\\upload\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:j,staticGenerationAsyncStorage:w,serverHooks:x,headerHooks:v,staticGenerationBailout:F}=h,Z="/api/upload/route";function b(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:w})}},58719:(e,r,t)=>{t.d(r,{Z:()=>c});var o=t(6113),a=t.n(o);let s=new Uint8Array(256),i=s.length,n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));let l=function(e,r=0){let t=(u[e[r+0]]+u[e[r+1]]+u[e[r+2]]+u[e[r+3]]+"-"+u[e[r+4]]+u[e[r+5]]+"-"+u[e[r+6]]+u[e[r+7]]+"-"+u[e[r+8]]+u[e[r+9]]+"-"+u[e[r+10]]+u[e[r+11]]+u[e[r+12]]+u[e[r+13]]+u[e[r+14]]+u[e[r+15]]).toLowerCase();if(!("string"==typeof t&&n.test(t)))throw TypeError("Stringified UUID is invalid");return t},c=function(e,r,t){let o=(e=e||{}).random||(e.rng||function(){return i>s.length-16&&(a().randomFillSync(s),i=0),s.slice(i,i+=16)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=o[e];return r}return l(o)}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206],()=>t(12022));module.exports=o})();