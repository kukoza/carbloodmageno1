(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{7476:function(e,s,t){Promise.resolve().then(t.bind(t,74))},74:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return z}});var a=t(3827),r=t(4090),n=t(5754),l=t(7815),i=t(1478),d=t(8994),o=t(8670),c=t(94),u=t(1213),m=t(684),f=t(7326),h=t(9599),x=t(7731),p=t(489),g=t(5179),j=t(7366),v=t(660),N=t(2706),y=t(4118),w=t(9842),b=t(5509),k=t(7934),Z=t(7788),C=t(8973),E=t(7907);let S=["ฝ่ายขาย","ฝ่ายการตลาด","ฝ่ายการเงิน","ฝ่ายไอที","ฝ่ายปฏิบัติการ","ฝ่ายทรัพยากรบุคคล","ฝ่ายวิศวกรรม"],_=["ผู้ใช้งาน","ผู้ดูแลระบบ"];function z(){(0,E.useRouter)();let[e,s]=(0,r.useState)([]),[t,z]=(0,r.useState)(""),P=(0,j.a)("(max-width: 768px)"),[I,F]=(0,r.useState)(!0),[R,M]=(0,r.useState)(null),[V,L]=(0,r.useState)(!1),[A,O]=(0,r.useState)({name:"",email:"",department:"",role:"ผู้ใช้งาน",password:"",confirmPassword:"",phone:"",employeeId:"",licenseNumber:""}),[T,q]=(0,r.useState)(!1),[D,B]=(0,r.useState)(null),[$,Q]=(0,r.useState)(null),[Y,W]=(0,r.useState)(!1),[J,U]=(0,r.useState)(null),[H,K]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){try{F(!0);let e=await fetch("/api/users"),t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw Error("Expected JSON response but got ".concat(t));if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to fetch users")}let a=await e.json();s(a)}catch(e){console.error("Error loading users:",e),M("ไม่สามารถโหลดข้อมูลผู้ใช้ได้: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{F(!1)}}()},[]);let G=e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase())||e.department.toLowerCase().includes(t.toLowerCase())),X=async()=>{if(!A.name||!A.email||!A.department||!A.password){(0,Z.Am)({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน",variant:"destructive"});return}if(A.password!==A.confirmPassword){(0,Z.Am)({title:"รหัสผ่านไม่ตรงกัน",description:"กรุณาตรวจสอบรหัสผ่านและยืนยันรหัสผ่านให้ตรงกัน",variant:"destructive"});return}K(!0);try{let t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:A.name,email:A.email,department:A.department,role:A.role,password:A.password,phone:A.phone,employeeId:A.employeeId,licenseNumber:A.licenseNumber})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add user")}let a=await t.json();s([...e,a]),O({name:"",email:"",department:"",role:"ผู้ใช้งาน",password:"",confirmPassword:"",phone:"",employeeId:"",licenseNumber:""}),L(!1),(0,Z.Am)({title:"เพิ่มผู้ใช้สำเร็จ",description:"เพิ่มข้อมูลผู้ใช้ใหม่เรียบร้อยแล้ว"})}catch(e){console.error("Error adding user:",e),(0,Z.Am)({title:"เกิดข้อผิดพลาด",description:"Email already exists"===e.message?"อีเมลนี้มีอยู่ในระบบแล้ว กรุณาใช้อีเมลอื่น":"ไม่สามารถเพิ่มผู้ใช้ได้ กรุณาลองใหม่อีกครั้ง",variant:"destructive"})}finally{K(!1)}},ee=async()=>{if($){if(!$.name||!$.email||!$.department){(0,Z.Am)({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน",variant:"destructive"});return}K(!0);try{let t=await fetch("/api/users/".concat($.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update user")}let a=await t.json();s(e.map(e=>e.id===$.id?a:e)),q(!1),(0,Z.Am)({title:"แก้ไขผู้ใช้สำเร็จ",description:"แก้ไขข้อมูลผู้ใช้เรียบร้อยแล้ว"})}catch(e){console.error("Error updating user:",e),(0,Z.Am)({title:"เกิดข้อผิดพลาด",description:"Email already exists"===e.message?"อีเมลนี้มีอยู่ในระบบแล้ว กรุณาใช้อีเมลอื่น":"ไม่สามารถแก้ไขข้อมูลผู้ใช้ได้ กรุณาลองใหม่อีกครั้ง",variant:"destructive"})}finally{K(!1)}}},es=async()=>{if(J){K(!0);try{let t=await fetch("/api/users/".concat(J.id),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete user")}s(e.filter(e=>e.id!==J.id)),W(!1),(0,Z.Am)({title:"ลบผู้ใช้สำเร็จ",description:"ลบข้อมูลผู้ใช้เรียบร้อยแล้ว"})}catch(s){console.error("Error deleting user:",s);let e="ไม่สามารถลบผู้ใช้ได้ กรุณาลองใหม่อีกครั้ง";"Cannot delete the last administrator"===s.message?e="ไม่สามารถลบผู้ดูแลระบบคนสุดท้ายได้":"Cannot delete user with active bookings"===s.message&&(e="ไม่สามารถลบผู้ใช้ที่มีการจองที่ยังไม่เสร็จสิ้นได้"),(0,Z.Am)({title:"เกิดข้อผิดพลาด",description:e,variant:"destructive"})}finally{K(!1)}}},et=(e,s)=>{e.preventDefault(),e.stopPropagation(),B(s),Q(s),q(!0)},ea=(e,s)=>{e.preventDefault(),e.stopPropagation(),U(s),W(!0)};return I?(0,a.jsx)("div",{className:"p-4 flex items-center justify-center h-[50vh]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{children:"กำลังโหลดข้อมูล..."})]})}):R?(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"bg-destructive/10 text-destructive p-4 rounded-md mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"เกิดข้อผิดพลาด"}),(0,a.jsx)("p",{children:R})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(n.z,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"ลองใหม่อีกครั้ง"}),(0,a.jsx)(n.z,{variant:"outline",className:"mt-4",onClick:()=>window.open("/api/test-db","_blank"),children:"ทดสอบการเชื่อมต่อฐานข้อมูล"}),(0,a.jsx)(n.z,{variant:"outline",className:"mt-4",onClick:()=>window.open("/api/users","_blank"),children:"ทดสอบ API ผู้ใช้งาน"})]})]}):(0,a.jsxs)("div",{className:"p-4 pt-6 max-w-5xl mx-auto",children:[(0,a.jsx)(C.x,{}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"จัดการผู้ใช้งาน"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"จัดการผู้ใช้งานทั้งหมดในระบบ"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.I,{placeholder:"ค้นหาผู้ใช้...",className:"pl-9",value:t,onChange:e=>z(e.target.value)})]}),(0,a.jsxs)(N.Vq,{open:V,onOpenChange:L,children:[(0,a.jsxs)(n.z,{className:"w-full md:w-auto",onClick:()=>L(!0),children:[(0,a.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"เพิ่มผู้ใช้งานใหม่"]}),(0,a.jsxs)(N.cZ,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(N.fK,{children:[(0,a.jsxs)(N.$N,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5"}),"เพิ่มผู้ใช้งานใหม่"]}),(0,a.jsx)(N.Be,{children:"กรอกข้อมูลเพื่อเพิ่มผู้ใช้งานใหม่เข้าสู่ระบบ"})]}),(0,a.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"name",className:"text-base",children:["ชื่อ-นามสกุล ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.I,{id:"name",value:A.name,onChange:e=>O({...A,name:e.target.value}),placeholder:"กรอกชื่อ-นามสกุล",className:"border-0 p-0 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"email",className:"text-base",children:["อีเมล ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.I,{id:"email",type:"email",value:A.email,onChange:e=>O({...A,email:e.target.value}),placeholder:"กรอกอีเมล",className:"border-0 p-0 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"department",className:"text-base",children:["แผนก ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(b.Ph,{value:A.department,onValueChange:e=>O({...A,department:e}),children:[(0,a.jsx)(b.i4,{className:"border-0 p-0 h-9 focus:ring-0 focus:ring-offset-0",children:(0,a.jsx)(b.ki,{placeholder:"เลือกแผนก"})}),(0,a.jsx)(b.Bw,{children:S.map(e=>(0,a.jsx)(b.Ql,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"role",className:"text-base",children:"สิทธิ์การใช้งาน"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-1",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(b.Ph,{value:A.role,onValueChange:e=>O({...A,role:e}),children:[(0,a.jsx)(b.i4,{className:"border-0 p-0 h-9 focus:ring-0 focus:ring-offset-0",children:(0,a.jsx)(b.ki,{placeholder:"เลือกสิทธิ์การใช้งาน"})}),(0,a.jsx)(b.Bw,{children:_.map(e=>(0,a.jsx)(b.Ql,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"password",className:"text-base",children:["รหัสผ่าน ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(g.I,{id:"password",type:"password",value:A.password,onChange:e=>O({...A,password:e.target.value}),placeholder:"รหัสผ่าน"})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"confirmPassword",className:"text-base",children:["ยืนยันรหัสผ่าน ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(g.I,{id:"confirmPassword",type:"password",value:A.confirmPassword,onChange:e=>O({...A,confirmPassword:e.target.value}),placeholder:"ยืนยันรหัสผ่าน"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"employeeId",className:"text-base",children:"รหัสพนักงาน"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.I,{id:"employeeId",value:A.employeeId,onChange:e=>O({...A,employeeId:e.target.value}),placeholder:"NZ-1234",className:"border-0 p-0 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"phone",className:"text-base",children:"เบอร์โทรศัพท์"}),(0,a.jsx)(g.I,{id:"phone",value:A.phone,onChange:e=>O({...A,phone:e.target.value}),placeholder:"+66 81-234-5678"})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"licenseNumber",className:"text-base",children:"เลขที่ใบอนุญาตขับขี่"}),(0,a.jsx)(g.I,{id:"licenseNumber",value:A.licenseNumber,onChange:e=>O({...A,licenseNumber:e.target.value}),placeholder:"T123456789"})]})]}),(0,a.jsxs)(N.cN,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>L(!1),disabled:H,children:"ยกเลิก"}),(0,a.jsx)(n.z,{onClick:X,disabled:H||!A.name||!A.email||!A.department||!A.password||!A.confirmPassword,children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"กำลังบันทึก..."]}):"เพิ่มผู้ใช้งาน"})]})]})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:G.length>0?G.map(e=>(0,a.jsx)(l.Zb,{className:"overflow-hidden hover:bg-muted/50 transition-colors",children:(0,a.jsxs)(l.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(v.qE,{className:"h-10 w-10",children:[(0,a.jsx)(v.F$,{src:e.avatar||"/placeholder.svg?height=40&width=40",alt:e.name}),(0,a.jsx)(v.Q5,{children:e.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.C,{variant:"ผู้ดูแลระบบ"===e.role?"default":"outline",className:"whitespace-nowrap",children:e.role}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsxs)(n.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:s=>et(s,e),children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"แก้ไข"})]}),(0,a.jsxs)(n.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:s=>ea(s,e),children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"ลบ"})]})]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-2 ml-13",children:["แผนก: ",e.department]})]})},e.id)):(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"ไม่พบผู้ใช้ที่ตรงกับเงื่อนไขการค้นหา"})}),P&&(0,a.jsxs)(n.z,{size:"lg",className:"fixed bottom-20 right-4 h-14 w-14 rounded-full shadow-lg z-30",onClick:()=>L(!0),children:[(0,a.jsx)(c.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"sr-only",children:"เพิ่มผู้ใช้"})]}),(0,a.jsx)(N.Vq,{open:T,onOpenChange:q,children:(0,a.jsxs)(N.cZ,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(N.fK,{children:[(0,a.jsxs)(N.$N,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),"แก้ไขข้อมูลผู้ใช้งาน"]}),(0,a.jsx)(N.Be,{children:"แก้ไขข้อมูลของผู้ใช้งานนี้"})]}),$&&(0,a.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,a.jsxs)(v.qE,{className:"h-16 w-16",children:[(0,a.jsx)(v.F$,{src:$.avatar||"/placeholder.svg?height=64&width=64",alt:$.name}),(0,a.jsx)(v.Q5,{children:$.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-lg",children:$.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:$.email})]})]}),(0,a.jsx)(k.Z,{}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"edit-name",className:"text-base",children:["ชื่อ-นามสกุล ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.I,{id:"edit-name",value:$.name,onChange:e=>Q({...$,name:e.target.value}),placeholder:"กรอกชื่อ-นามสกุล",className:"border-0 p-0 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"edit-email",className:"text-base",children:["อีเมล ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.I,{id:"edit-email",type:"email",value:$.email,onChange:e=>Q({...$,email:e.target.value}),placeholder:"กรอกอีเมล",className:"border-0 p-0 focus-visible:ring-0 focus-visible:ring-offset-0"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w._,{htmlFor:"edit-department",className:"text-base",children:["แผนก ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(b.Ph,{value:$.department,onValueChange:e=>Q({...$,department:e}),children:[(0,a.jsx)(b.i4,{className:"border-0 p-0 h-9 focus:ring-0 focus:ring-offset-0",children:(0,a.jsx)(b.ki,{placeholder:"เลือกแผนก"})}),(0,a.jsx)(b.Bw,{children:S.map(e=>(0,a.jsx)(b.Ql,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"edit-role",className:"text-base",children:"สิทธิ์การใช้งาน"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-3 py-1",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(b.Ph,{value:$.role,onValueChange:e=>Q({...$,role:e}),children:[(0,a.jsx)(b.i4,{className:"border-0 p-0 h-9 focus:ring-0 focus:ring-offset-0",children:(0,a.jsx)(b.ki,{placeholder:"เลือกสิทธิ์การใช้งาน"})}),(0,a.jsx)(b.Bw,{children:_.map(e=>(0,a.jsx)(b.Ql,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"edit-phone",className:"text-base",children:"เบอร์โทรศัพท์"}),(0,a.jsx)(g.I,{id:"edit-phone",value:$.phone||"",onChange:e=>Q({...$,phone:e.target.value}),placeholder:"+66 81-234-5678"})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)(w._,{htmlFor:"edit-employeeId",className:"text-base",children:"รหัสพนักงาน"}),(0,a.jsx)(g.I,{id:"edit-employeeId",value:$.employeeId||"",onChange:e=>Q({...$,employeeId:e.target.value}),placeholder:"NZ-1234"})]})]}),(0,a.jsxs)(N.cN,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>q(!1),disabled:H,children:"ยกเลิก"}),(0,a.jsx)(n.z,{onClick:ee,disabled:H||!(null==$?void 0:$.name)||!(null==$?void 0:$.email)||!(null==$?void 0:$.department),children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"กำลังบันทึก..."]}):"บันทึกการเปลี่ยนแปลง"})]})]})}),(0,a.jsx)(y.aR,{open:Y,onOpenChange:W,children:(0,a.jsxs)(y._T,{children:[(0,a.jsxs)(y.fY,{children:[(0,a.jsxs)(y.f$,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-destructive"}),"ยืนยันการลบผู้ใช้งาน"]}),(0,a.jsxs)(y.yT,{children:["คุณแน่ใจหรือไม่ว่าต้องการลบผู้ใช้งานนี้? การกระทำนี้ไม่สามารถย้อนกลับได้",J&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-muted rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(v.qE,{className:"h-12 w-12",children:[(0,a.jsx)(v.F$,{src:J.avatar||"/placeholder.svg?height=48&width=48",alt:J.name}),(0,a.jsx)(v.Q5,{children:J.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:J.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:J.email}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["แผนก: ",J.department]})]})]})})]})]}),(0,a.jsxs)(y.xo,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(y.le,{disabled:H,children:"ยกเลิก"}),(0,a.jsx)(y.OL,{onClick:es,disabled:H,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"กำลังลบ..."]}):"ลบผู้ใช้งาน"})]})]})})]})}},660:function(e,s,t){"use strict";t.d(s,{F$:function(){return d},Q5:function(){return o},qE:function(){return i}});var a=t(3827),r=t(4090),n=t(7733),l=t(1657);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});i.displayName=n.fC.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.Ee,{ref:s,className:(0,l.cn)("aspect-square h-full w-full",t),...r})});d.displayName=n.Ee.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.NY,{ref:s,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});o.displayName=n.NY.displayName},1478:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var a=t(3827);t(4090);var r=t(9769),n=t(1657);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:t}),s),...r})}},2706:function(e,s,t){"use strict";t.d(s,{$N:function(){return x},Be:function(){return p},Vq:function(){return d},cN:function(){return h},cZ:function(){return m},fK:function(){return f},hg:function(){return o}});var a=t(3827),r=t(4090),n=t(2936),l=t(2235),i=t(1657);let d=n.fC,o=n.xz,c=n.h_;n.x8;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};f.displayName="DialogHeader";let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};h.displayName="DialogFooter";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});x.displayName=n.Dx.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});p.displayName=n.dk.displayName},5179:function(e,s,t){"use strict";t.d(s,{I:function(){return l}});var a=t(3827),r=t(4090),n=t(1657);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"},9842:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var a=t(3827),r=t(4090),n=t(4602),l=t(9769),i=t(1657);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.f,{ref:s,className:(0,i.cn)(d(),t),...r})});o.displayName=n.f.displayName},5509:function(e,s,t){"use strict";t.d(s,{Bw:function(){return x},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var a=t(3827),r=t(4090),n=t(8161),l=t(3441),i=t(5159),d=t(9259),o=t(1657);let c=n.fC;n.ZA;let u=n.B4,m=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(n.xz,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});h.displayName=n.$G.displayName;let x=r.forwardRef((e,s)=>{let{className:t,children:r,position:l="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:s,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...i,children:[(0,a.jsx)(f,{}),(0,a.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});x.displayName=n.VY.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=n.__.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(n.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:r})]})});p.displayName=n.ck.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=n.Z0.displayName},7934:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(3827),r=t(4090),n=t(1014),l=t(1657);let i=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:i=!0,...d}=e;return(0,a.jsx)(n.f,{ref:s,decorative:i,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...d})});i.displayName=n.f.displayName},7366:function(e,s,t){"use strict";t.d(s,{a:function(){return r}});var a=t(4090);function r(e){let[s,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let s=window.matchMedia(e),a=e=>t(e.matches);return t(s.matches),s.addEventListener("change",a),()=>s.removeEventListener("change",a)},[e]),s}},7326:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},8994:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},684:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7731:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},94:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8670:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9599:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},489:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1213:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7907:function(e,s,t){"use strict";var a=t(5313);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},221:function(e,s,t){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(4090),r="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},n=a.useState,l=a.useEffect,i=a.useLayoutEffect,d=a.useDebugValue;function o(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!r(e,t)}catch(e){return!0}}var c=void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),a=n({inst:{value:t,getSnapshot:s}}),r=a[0].inst,c=a[1];return i(function(){r.value=t,r.getSnapshot=s,o(r)&&c({inst:r})},[e,t,s]),l(function(){return o(r)&&c({inst:r}),e(function(){o(r)&&c({inst:r})})},[e]),d(t),t};s.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},2362:function(e,s,t){"use strict";e.exports=t(221)},7733:function(e,s,t){"use strict";t.d(s,{NY:function(){return k},Ee:function(){return b},fC:function(){return w}});var a=t(4090),r=t(4104),n=t(9830),l=t(2618),i=t(9586),d=t(2362);function o(){return()=>{}}var c=t(3827),u="Avatar",[m,f]=(0,r.b)(u),[h,x]=m(u),p=a.forwardRef((e,s)=>{let{__scopeAvatar:t,...r}=e,[n,l]=a.useState("idle");return(0,c.jsx)(h,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,c.jsx)(i.WV.span,{...r,ref:s})})});p.displayName=u;var g="AvatarImage",j=a.forwardRef((e,s)=>{let{__scopeAvatar:t,src:r,onLoadingStatusChange:u=()=>{},...m}=e,f=x(g,t),h=function(e,s){let{referrerPolicy:t,crossOrigin:r}=s,n=(0,d.useSyncExternalStore)(o,()=>!0,()=>!1),i=a.useRef(null),c=n?(i.current||(i.current=new window.Image),i.current):null,[u,m]=a.useState(()=>y(c,e));return(0,l.b)(()=>{m(y(c,e))},[c,e]),(0,l.b)(()=>{let e=e=>()=>{m(e)};if(!c)return;let s=e("loaded"),a=e("error");return c.addEventListener("load",s),c.addEventListener("error",a),t&&(c.referrerPolicy=t),"string"==typeof r&&(c.crossOrigin=r),()=>{c.removeEventListener("load",s),c.removeEventListener("error",a)}},[c,r,t]),u}(r,m),p=(0,n.W)(e=>{u(e),f.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==h&&p(h)},[h,p]),"loaded"===h?(0,c.jsx)(i.WV.img,{...m,ref:s,src:r}):null});j.displayName=g;var v="AvatarFallback",N=a.forwardRef((e,s)=>{let{__scopeAvatar:t,delayMs:r,...n}=e,l=x(v,t),[d,o]=a.useState(void 0===r);return a.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),d&&"loaded"!==l.imageLoadingStatus?(0,c.jsx)(i.WV.span,{...n,ref:s}):null});function y(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}N.displayName=v;var w=p,b=j,k=N},4602:function(e,s,t){"use strict";t.d(s,{f:function(){return i}});var a=t(4090),r=t(9586),n=t(3827),l=a.forwardRef((e,s)=>(0,n.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var i=l},1014:function(e,s,t){"use strict";t.d(s,{f:function(){return o}});var a=t(4090),r=t(9586),n=t(3827),l="horizontal",i=["horizontal","vertical"],d=a.forwardRef((e,s)=>{let{decorative:t,orientation:a=l,...d}=e,o=i.includes(a)?a:l;return(0,n.jsx)(r.WV.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:s})});d.displayName="Separator";var o=d}},function(e){e.O(0,[4894,613,6111,2776,9137,2028,5687,5330,2971,8069,1744],function(){return e(e.s=7476)}),_N_E=e.O()}]);