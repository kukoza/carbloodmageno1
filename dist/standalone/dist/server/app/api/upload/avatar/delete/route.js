"use strict";(()=>{var e={};e.id=6507,e.ids=[6507],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},71017:e=>{e.exports=require("path")},32214:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>j,originalPathname:()=>y,patchFetch:()=>F,requestAsyncStorage:()=>m,routeModule:()=>v,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>x});var o={};t.r(o),t.d(o,{POST:()=>f});var a=t(95419),s=t(69108),l=t(99678),n=t(78070),i=t(73292),u=t(57147),d=t(71017),c=t.n(d);let p=c().join(process.cwd(),"public/uploads/avatars");async function f(e){try{let{fileName:r}=await e.json();if(!r)return n.Z.json({error:"No file name provided"},{status:400});if(console.log(`Received delete request for file: ${r}`),r.includes("..")||r.includes("/")||r.includes("\\"))return console.error(`Invalid file name: ${r}`),n.Z.json({error:"Invalid file name"},{status:400});let t=c().join(p,r);if(console.log(`Full file path to delete: ${t}`),!(0,u.existsSync)(t))return console.error(`File not found: ${t}`),n.Z.json({error:"File not found",path:t},{status:404});try{return await (0,i.unlink)(t),console.log(`Successfully deleted file: ${t}`),n.Z.json({success:!0,message:"File deleted successfully"})}catch(e){return console.error(`Error during file deletion: ${t}`,e),n.Z.json({error:"Failed to delete file",details:e},{status:500})}}catch(e){return console.error("Error in delete avatar API:",e),n.Z.json({error:"Failed to delete avatar",details:e},{status:500})}}let v=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/upload/avatar/delete/route",pathname:"/api/upload/avatar/delete",filename:"route",bundlePath:"app/api/upload/avatar/delete/route"},resolvedPagePath:"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\api\\upload\\avatar\\delete\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:j,staticGenerationBailout:x}=v,y="/api/upload/avatar/delete/route";function F(){return(0,l.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206],()=>t(32214));module.exports=o})();