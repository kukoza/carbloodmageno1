(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8427],{3400:function(e,t,r){Promise.resolve().then(r.bind(r,703))},703:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(3827),s=r(4090),a=r(8792),i=r(5754),o=r(7815),c=r(1478),l=r(7307),u=r(5546),d=r(7366),f=r(660);function m(){let[e,t]=(0,s.useState)(""),[r,m]=(0,s.useState)("ทั้งหมด"),h=(0,d.a)("(max-width: 768px)"),[x,v]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[b,N]=(0,s.useState)(!0),[j,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{w()},[]);let w=async()=>{N(!0);try{let e=await fetch("/api/bookings");if(!e.ok)throw Error("Failed to fetch bookings");let t=await e.json();v(t);let r=await fetch("/api/cars");if(!r.ok)throw Error("Failed to fetch cars");let n=await r.json();p(n)}catch(e){console.error("Error fetching data:",e),y("Failed to load data. Please try again.")}finally{N(!1)}},k=e=>new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}),C=x.filter(t=>{let n=t.userName.toLowerCase().includes(e.toLowerCase())||t.carName.toLowerCase().includes(e.toLowerCase())||t.purpose.toLowerCase().includes(e.toLowerCase()),s="ทั้งหมด"===r||"รออนุมัติ"===r&&"รออนุมัติ"===t.status||"อนุมัติแล้ว"===r&&"อนุมัติแล้ว"===t.status;return n&&s}),E=x.filter(e=>"รออนุมัติ"===e.status).length,S=g.filter(e=>"ว่าง"===e.status).length;return b?(0,n.jsx)("div",{className:"p-4",children:"กำลังโหลดข้อมูล..."}):j?(0,n.jsx)("div",{className:"p-4 text-destructive",children:j}):(0,n.jsxs)("div",{className:"p-4 pt-6 max-w-5xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"แดชบอร์ด"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"ภาพรวมของระบบจองรถ"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,n.jsxs)(o.Zb,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 border-blue-200 dark:border-blue-800",children:[(0,n.jsx)(o.Ol,{className:"pb-2",children:(0,n.jsxs)(o.ll,{className:"text-base flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),"การจองรออนุมัติ"]})}),(0,n.jsx)(o.aY,{children:(0,n.jsx)("div",{className:"text-3xl font-bold",children:E})})]}),(0,n.jsxs)(o.Zb,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 border-green-200 dark:border-green-800",children:[(0,n.jsx)(o.Ol,{className:"pb-2",children:(0,n.jsxs)(o.ll,{className:"text-base flex items-center gap-2",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4"}),"รถพร้อมใช้งาน"]})}),(0,n.jsx)(o.aY,{children:(0,n.jsx)("div",{className:"text-3xl font-bold",children:S})})]})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"การจองล่าสุด"}),(0,n.jsx)(a.default,{href:"/admin/bookings",children:(0,n.jsx)(i.z,{variant:"outline",size:"sm",children:"ดูทั้งหมด"})})]}),(0,n.jsx)("div",{className:"space-y-3",children:C.slice(0,3).map(e=>(0,n.jsx)(a.default,{href:"/admin/bookings/".concat(e.id),children:(0,n.jsxs)(o.Zb,{className:"overflow-hidden hover:bg-muted/50 transition-colors",children:[(0,n.jsx)("div",{className:"h-1 ".concat("อนุมัติแล้ว"===e.status?"bg-green-500":"bg-yellow-500")}),(0,n.jsxs)(o.aY,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(f.qE,{className:"h-8 w-8",children:(0,n.jsx)(f.Q5,{children:e.userName.charAt(0)})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.userName}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:e.userDepartment})]})]}),(0,n.jsx)(c.C,{variant:"อนุมัติแล้ว"===e.status?"default":"outline",className:"ml-auto",children:e.status})]}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)(u.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{children:e.carName})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{children:k(e.startDate)})]})]})]})]})},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"รถที่พร้อมใช้งาน"}),(0,n.jsx)(a.default,{href:"/admin/cars",children:(0,n.jsx)(i.z,{variant:"outline",size:"sm",children:"ดูทั้งหมด"})})]}),(0,n.jsx)("div",{className:"space-y-3",children:g.filter(e=>"ว่าง"===e.status).slice(0,3).map(e=>(0,n.jsx)(a.default,{href:"/admin/cars/".concat(e.id),children:(0,n.jsxs)(o.Zb,{className:"overflow-hidden hover:bg-muted/50 transition-colors",children:[(0,n.jsx)("div",{className:"h-1 bg-green-500"}),(0,n.jsxs)(o.aY,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsx)(c.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"พร้อมใช้งาน"})]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:e.type})]})]})},e.id))})]}),h&&(0,n.jsx)(a.default,{href:"/admin/bookings",children:(0,n.jsxs)(i.z,{size:"lg",className:"fixed bottom-20 right-4 h-14 w-14 rounded-full shadow-lg z-30",children:[(0,n.jsx)(l.Z,{className:"h-6 w-6"}),(0,n.jsx)("span",{className:"sr-only",children:"การจอง"})]})})]})}},660:function(e,t,r){"use strict";r.d(t,{F$:function(){return c},Q5:function(){return l},qE:function(){return o}});var n=r(3827),s=r(4090),a=r(7733),i=r(1657);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});o.displayName=a.fC.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...s})});c.displayName=a.Ee.displayName;let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});l.displayName=a.NY.displayName},1478:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(3827);r(4090);var s=r(9769),a=r(1657);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},5754:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return l}});var n=r(3827),s=r(4090),a=r(9143),i=r(9769),o=r(1657);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,n.jsx)(d,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...u})});l.displayName="Button"},7815:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return u},eW:function(){return d},ll:function(){return c}});var n=r(3827),s=r(4090),a=r(1657);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});u.displayName="CardContent";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});d.displayName="CardFooter"},7366:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var n=r(4090);function s(e){let[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=window.matchMedia(e),n=e=>r(e.matches);return r(t.matches),t.addEventListener("change",n),()=>t.removeEventListener("change",n)},[e]),t}},1657:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(3167),s=r(1367);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(4090),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{let{color:o="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:f,...m}=r;return(0,n.createElement)("svg",{ref:i,...s,width:c,height:c,stroke:o,strokeWidth:u?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(a(e)),d].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(f)?f:[f]])});return r.displayName="".concat(e),r}},7307:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7461).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},5546:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7461).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(5250),s=r.n(n)},221:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(4090),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var u=void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,u=n[1];return o(function(){s.value=r,s.getSnapshot=t,l(s)&&u({inst:s})},[e,r,t]),i(function(){return l(s)&&u({inst:s}),e(function(){l(s)&&u({inst:s})})},[e]),c(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},2362:function(e,t,r){"use strict";e.exports=r(221)},7733:function(e,t,r){"use strict";r.d(t,{NY:function(){return k},Ee:function(){return w},fC:function(){return y}});var n=r(4090),s=r(4104),a=r(9830),i=r(2618),o=r(9586),c=r(2362);function l(){return()=>{}}var u=r(3827),d="Avatar",[f,m]=(0,s.b)(d),[h,x]=f(d),v=n.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[a,i]=n.useState("idle");return(0,u.jsx)(h,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:(0,u.jsx)(o.WV.span,{...s,ref:t})})});v.displayName=d;var g="AvatarImage",p=n.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:d=()=>{},...f}=e,m=x(g,r),h=function(e,t){let{referrerPolicy:r,crossOrigin:s}=t,a=(0,c.useSyncExternalStore)(l,()=>!0,()=>!1),o=n.useRef(null),u=a?(o.current||(o.current=new window.Image),o.current):null,[d,f]=n.useState(()=>j(u,e));return(0,i.b)(()=>{f(j(u,e))},[u,e]),(0,i.b)(()=>{let e=e=>()=>{f(e)};if(!u)return;let t=e("loaded"),n=e("error");return u.addEventListener("load",t),u.addEventListener("error",n),r&&(u.referrerPolicy=r),"string"==typeof s&&(u.crossOrigin=s),()=>{u.removeEventListener("load",t),u.removeEventListener("error",n)}},[u,s,r]),d}(s,f),v=(0,a.W)(e=>{d(e),m.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==h&&v(h)},[h,v]),"loaded"===h?(0,u.jsx)(o.WV.img,{...f,ref:t,src:s}):null});p.displayName=g;var b="AvatarFallback",N=n.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...a}=e,i=x(b,r),[c,l]=n.useState(void 0===s);return n.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(e)}},[s]),c&&"loaded"!==i.imageLoadingStatus?(0,u.jsx)(o.WV.span,{...a,ref:t}):null});function j(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}N.displayName=b;var y=v,w=p,k=N},4104:function(e,t,r){"use strict";r.d(t,{b:function(){return i},k:function(){return a}});var n=r(4090),s=r(3827);function a(e,t){let r=n.createContext(t),a=e=>{let{children:t,...a}=e,i=n.useMemo(()=>a,Object.values(a));return(0,s.jsx)(r.Provider,{value:i,children:t})};return a.displayName=e+"Provider",[a,function(s){let a=n.useContext(r);if(a)return a;if(void 0!==t)return t;throw Error("`".concat(s,"` must be used within `").concat(e,"`"))}]}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],a=()=>{let t=r.map(e=>n.createContext(e));return function(r){let s=(null==r?void 0:r[e])||t;return n.useMemo(()=>({["__scope".concat(e)]:{...r,[e]:s}}),[r,s])}};return a.scopeName=e,[function(t,a){let i=n.createContext(a),o=r.length;r=[...r,a];let c=t=>{var r;let{scope:a,children:c,...l}=t,u=(null==a?void 0:null===(r=a[e])||void 0===r?void 0:r[o])||i,d=n.useMemo(()=>l,Object.values(l));return(0,s.jsx)(u.Provider,{value:d,children:c})};return c.displayName=t+"Provider",[c,function(r,s){var c;let l=(null==s?void 0:null===(c=s[e])||void 0===c?void 0:c[o])||i,u=n.useContext(l);if(u)return u;if(void 0!==a)return a;throw Error("`".concat(r,"` must be used within `").concat(t,"`"))}]},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=t[0];if(1===t.length)return s;let a=()=>{let e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){let r=e.reduce((e,r)=>{let{useScope:n,scopeName:s}=r,a=n(t)["__scope".concat(s)];return{...e,...a}},{});return n.useMemo(()=>({["__scope".concat(s.scopeName)]:r}),[r])}};return a.scopeName=s.scopeName,a}(a,...t)]}},9830:function(e,t,r){"use strict";r.d(t,{W:function(){return s}});var n=r(4090);function s(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>function(){for(var e,r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];return null===(e=t.current)||void 0===e?void 0:e.call(t,...n)},[])}},2618:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n,s=r(4090),a=(null===(n=globalThis)||void 0===n?void 0:n.document)?s.useLayoutEffect:()=>{}}},function(e){e.O(0,[4894,5250,2971,8069,1744],function(){return e(e.s=3400)}),_N_E=e.O()}]);