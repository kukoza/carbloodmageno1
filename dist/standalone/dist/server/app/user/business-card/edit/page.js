(()=>{var e={};e.id=667,e.ids=[667],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},89199:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=a(50482),n=a(69108),t=a(62563),o=a.n(t),i=a(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(s,l);let d=["",{children:["user",{children:["business-card",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7945)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\user\\business-card\\edit\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,76393)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\user\\business-card\\edit\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,12536)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\user\\business-card\\layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,8255)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\user\\business-card\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,66175)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\user\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15438)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\user\\business-card\\edit\\page.tsx"],u="/user/business-card/edit/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/user/business-card/edit/page",pathname:"/user/business-card/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3088:(e,s,a)=>{Promise.resolve().then(a.bind(a,8198))},8198:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var r=a(95344),n=a(3729),t=a(8428),o=a(91626);let i=n.forwardRef(({className:e,type:s,...a},n)=>r.jsx("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...a}));i.displayName="Input";var l=a(14217);let d=(0,a(49247).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef(({className:e,...s},a)=>r.jsx(l.f,{ref:a,className:(0,o.cn)(d(),e),...s}));c.displayName=l.f.displayName;let u=n.forwardRef(({className:e,...s},a)=>r.jsx("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));function m(){let[e,s]=(0,n.useState)({id:null,user_id:0,name_th:"",name_en:"",position_th:"",position_en:"",department_th:"",department_en:"",company_th:"",company_en:"NOZOMI ENTERPRISE (THAILAND) CO., LTD.",branch:"Branch 1",address_th:"382 หมู่ 4 ตำบลคลองสวน",address_en:"382 M.4 Baanklongsuan,Phrasamutjede,Samutprakarn 10290 Thailand",branch_address_th:"168 หมู่ 2 ตำบลคลองสวน",branch_address_en:"168 M.2 Baanklongsuan,Phrasamutjede,Samutprakarn 10290 Thailand",tel:"",company_tel:"02-461-6291",fax:"02-461-6292",email:"",website:"",line_id:"",facebook:""}),[a,o]=(0,n.useState)(!0),[l,d]=(0,n.useState)(!1),[m,h]=(0,n.useState)(null),p=(0,t.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{o(!0),h(null);try{let e=await fetch("/api/db-update/create-business-cards-table-direct");console.log("Table creation response:",await e.json())}catch(e){console.error("Error creating table:",e)}try{let e=await fetch("/api/db-update/add-branch-company-tel-columns");console.log("Add columns response:",await e.json())}catch(e){console.error("Error adding columns:",e)}try{let e=await fetch("/api/db-update/add-branch-address-columns");console.log("Add branch address columns response:",await e.json())}catch(e){console.error("Error adding branch address columns:",e)}await new Promise(e=>setTimeout(e,1e3));let e=await fetch("/api/business-cards");if(console.log("API response status:",e.status),!e.ok){let s=await e.json();throw console.error("API error:",s),Error(s.error||"Failed to fetch business card")}let a=await e.json();console.log("Business card data:",a),a.branch||(a.branch="Branch 1"),a.company_tel||(a.company_tel="02-461-6291"),a.branch_address_th||(a.branch_address_th="168 หมู่ 2 ตำบลคลองสวน"),a.address_en||(a.address_en="382 M.4 Baanklongsuan, Phrasamutjede,Samutprakarn 10290 Thailand"),a.branch_address_en||(a.branch_address_en="168 M.2 Baanklongsuan,Phrasamutjede,Samutprakarn 10290 Thailand"),s(a)}catch(e){console.error("Error loading business card:",e),h("Failed to load business card. Please try again.")}finally{o(!1)}})()},[]);let b=e=>{let{name:a,value:r}=e.target;s(e=>({...e,[a]:r}))},x=async s=>{s.preventDefault(),d(!0),h(null);try{let s=await fetch("/api/business-cards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to save business card")}p.push("/user/business-card")}catch(e){console.error("Error saving business card:",e),h("Failed to save business card. Please try again.")}finally{d(!1)}},g=async()=>{try{await fetch("/api/db-update/create-business-cards-table-direct"),p.refresh()}catch(e){console.error("Error retrying:",e)}};return a?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):m?(0,r.jsxs)("div",{className:"text-center py-10",children:[r.jsx("p",{className:"text-red-500 mb-4",children:m}),r.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try Again"})]}):(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Edit Business Card"}),m&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:m}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"name_th",children:"ชื่อ-นามสกุล (ไทย)"}),r.jsx(i,{id:"name_th",name:"name_th",value:e.name_th,onChange:b,className:"mt-1",placeholder:"อธิจิต หงส์กิตติกุล"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"name_en",children:"Name (English)"}),r.jsx(i,{id:"name_en",name:"name_en",value:e.name_en,onChange:b,className:"mt-1",placeholder:"Athijit Hongkittikul"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"position_th",children:"ตำแหน่ง (ไทย)"}),r.jsx(i,{id:"position_th",name:"position_th",value:e.position_th,onChange:b,className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"position_en",children:"Position (English)"}),r.jsx(i,{id:"position_en",name:"position_en",value:e.position_en,onChange:b,className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"company_en",children:"Company (English)"}),r.jsx(i,{id:"company_en",name:"company_en",value:e.company_en,onChange:b,className:"mt-1"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx(c,{htmlFor:"address_en",children:"Head Office Address (English)"}),r.jsx(u,{id:"address_en",name:"address_en",value:e.address_en,onChange:b,className:"mt-1",rows:2,placeholder:"382 M.4 Baanklongsuan, Phrasamutjede, Samutprakarn 10290 Thailand"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx(c,{htmlFor:"branch_address_en",children:"Branch Address (English)"}),r.jsx(u,{id:"branch_address_en",name:"branch_address_en",value:e.branch_address_en,onChange:b,className:"mt-1",rows:2,placeholder:"168 M.2 Baanklongsuan, Phrasamutjede, Samutprakarn 10290 Thailand"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"tel",children:"เบอร์โทรศัพท์มือถือ"}),r.jsx(i,{id:"tel",name:"tel",value:e.tel,onChange:b,className:"mt-1",placeholder:"098-930-3139"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"company_tel",children:"เบอร์โทรบริษัท"}),r.jsx(i,{id:"company_tel",name:"company_tel",value:e.company_tel,onChange:b,className:"mt-1",placeholder:"02-461-6291"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"fax",children:"แฟกซ์"}),r.jsx(i,{id:"fax",name:"fax",value:e.fax,onChange:b,className:"mt-1",placeholder:"02-461-6292"})]}),(0,r.jsxs)("div",{children:[r.jsx(c,{htmlFor:"email",children:"อีเมล"}),r.jsx(i,{id:"email",name:"email",value:e.email,onChange:b,className:"mt-1",placeholder:"gglike21@gmail.com"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{type:"button",onClick:()=>p.push("/user/business-card"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:l?"Saving...":"Save"})]})]})]})}u.displayName="Textarea"},91626:(e,s,a)=>{"use strict";a.d(s,{cn:()=>t});var r=a(56815),n=a(79377);function t(...e){return(0,n.m6)((0,r.W)(e))}},76393:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});var r=a(25036),n=a(77784);function t(){return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(n.O,{className:"h-8 w-64"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(n.O,{className:"h-12 w-full"}),r.jsx(n.O,{className:"h-12 w-full"}),r.jsx(n.O,{className:"h-12 w-full"}),r.jsx(n.O,{className:"h-12 w-full"}),r.jsx(n.O,{className:"h-12 w-full"}),r.jsx(n.O,{className:"h-12 w-full"})]}),r.jsx(n.O,{className:"h-12 w-32"})]})}},7945:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>t,__esModule:()=>n,default:()=>o});let r=(0,a(86843).createProxy)(String.raw`C:\xampp\htdocs\car-booking-system-110\car-booking-system-110\app\user\business-card\edit\page.tsx`),{__esModule:n,$$typeof:t}=r,o=r.default},14217:(e,s,a)=>{"use strict";a.d(s,{f:()=>i});var r=a(3729),n=a(62409),t=a(95344),o=r.forwardRef((e,s)=>(0,t.jsx)(n.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));o.displayName="Label";var i=o}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[1638,1227,1476,2518,4345,138],()=>a(89199));module.exports=r})();