(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6140],{6478:function(e,i,n){Promise.resolve().then(n.bind(n,6718))},6718:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return y}});var t=n(3827),s=n(4090),l=n(7815),r=n(5179),a=n(5754),c=n(7788),o=n(8973),d=n(7461);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var x=n(8998);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,d.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var m=n(7929);function y(){let[e,i]=(0,s.useState)(""),[n,d]=(0,s.useState)(!1),[y,u]=(0,s.useState)(""),[j,k]=(0,s.useState)(!1),[p,N]=(0,s.useState)("unknown"),{toast:v}=(0,c.pm)(),g=async()=>{try{let e=await fetch("/api/line-notify/check",{method:"GET"});if(e.ok){let i=await e.json();N(i.isValid?"valid":"invalid")}else N("unknown")}catch(e){console.error("Error checking token status:",e),N("unknown")}};(0,s.useEffect)(()=>{g()},[]);let b=async()=>{if(!e.trim()){v({title:"กรุณากรอก Line Notify Token",variant:"destructive"});return}d(!0);try{(await fetch("/api/settings/line-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})).ok?(v({title:"บันทึก Line Notify Token สำเร็จ",description:"ระบบจะใช้ Token นี้ในการส่งการแจ้งเตือนผ่าน Line"}),g()):v({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถบันทึก Line Notify Token ได้",variant:"destructive"})}catch(e){console.error("Error saving Line token:",e),v({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถบันทึก Line Notify Token ได้",variant:"destructive"})}finally{d(!1)}},L=async()=>{if(!y.trim()){v({title:"กรุณากรอกข้อความทดสอบ",variant:"destructive"});return}k(!0);try{let e=await fetch("/api/line-notify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:y})});if(e.ok)v({title:"ส่งข้อความทดสอบสำเร็จ",description:"ตรวจสอบการแจ้งเตือนในกลุ่ม Line ของคุณ"});else{let i=await e.json();v({title:"เกิดข้อผิดพลาด",description:i.error||"ไม่สามารถส่งข้อความทดสอบได้",variant:"destructive"})}}catch(e){console.error("Error sending test message:",e),v({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถส่งข้อความทดสอบได้",variant:"destructive"})}finally{k(!1)}};return(0,t.jsxs)("div",{className:"p-4 pt-6 max-w-5xl mx-auto",children:[(0,t.jsx)(o.x,{}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"ตั้งค่าระบบ"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"จัดการการตั้งค่าต่างๆ ของระบบ"})]}),(0,t.jsxs)(l.Zb,{className:"mb-6",children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsx)(l.ll,{children:"การแจ้งเตือนผ่าน Line"}),(0,t.jsx)(l.SZ,{children:"ตั้งค่า Line Notify เพื่อรับการแจ้งเตือนเมื่อมีการจองรถใหม่"})]}),(0,t.jsxs)(l.aY,{className:"space-y-4",children:["valid"===p&&(0,t.jsxs)(m.bZ,{className:"bg-green-50 border-green-200",children:[(0,t.jsx)(h,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(m.Cd,{className:"text-green-600",children:"Line Notify พร้อมใช้งาน"}),(0,t.jsx)(m.X,{className:"text-green-600",children:"ระบบสามารถส่งการแจ้งเตือนผ่าน Line ได้"})]}),"invalid"===p&&(0,t.jsxs)(m.bZ,{variant:"destructive",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),(0,t.jsx)(m.Cd,{children:"Line Notify Token ไม่ถูกต้อง"}),(0,t.jsx)(m.X,{children:"กรุณาตรวจสอบและอัปเดต Line Notify Token ใหม่"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{htmlFor:"lineToken",className:"text-sm font-medium",children:"Line Notify Token"}),(0,t.jsxs)("a",{href:"https://notify-bot.line.me/th/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline flex items-center",children:[(0,t.jsx)("span",{children:"วิธีสร้าง Token"}),(0,t.jsx)(f,{className:"h-3 w-3 ml-1"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.I,{id:"lineToken",type:"password",placeholder:"กรอก Line Notify Token",value:e,onChange:e=>i(e.target.value)}),(0,t.jsx)(a.z,{onClick:b,disabled:n,children:n?"กำลังบันทึก...":"บันทึก"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Token นี้จะถูกใช้ในการส่งการแจ้งเตือนไปยังกลุ่ม Line ที่คุณเพิ่ม Line Notify Bot ไว้"})]}),(0,t.jsxs)("div",{className:"pt-4 border-t",children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-2",children:"ทดสอบการส่งข้อความ"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.I,{placeholder:"ข้อความทดสอบ",value:y,onChange:e=>u(e.target.value)}),(0,t.jsx)(a.z,{onClick:L,disabled:j||"valid"!==p,children:j?"กำลังส่ง...":"ส่งทดสอบ"})]})]})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsx)(l.ll,{children:"วิธีตั้งค่า Line Notify"}),(0,t.jsx)(l.SZ,{children:"ขั้นตอนการตั้งค่า Line Notify เพื่อรับการแจ้งเตือนจากระบบ"})]}),(0,t.jsx)(l.aY,{className:"space-y-4",children:(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2",children:[(0,t.jsxs)("li",{children:["เข้าไปที่เว็บไซต์"," ",(0,t.jsx)("a",{href:"https://notify-bot.line.me/th/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Line Notify"})]}),(0,t.jsx)("li",{children:"ล็อกอินด้วยบัญชี Line ของคุณ"}),(0,t.jsx)("li",{children:'คลิกที่ "หน้าของฉัน" และเลือก "สร้าง Token"'}),(0,t.jsx)("li",{children:'ตั้งชื่อ Token (เช่น "ระบบจองรถ") และเลือกกลุ่ม Line ที่ต้องการรับการแจ้งเตือน'}),(0,t.jsx)("li",{children:'คลิก "สร้าง" และคัดลอก Token ที่ได้'}),(0,t.jsx)("li",{children:'นำ Token มาใส่ในช่อง Line Notify Token ด้านบนและคลิก "บันทึก"'})]})})]})]})}},8998:function(e,i,n){"use strict";n.d(i,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,n(7461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},function(e){e.O(0,[4894,613,6111,2776,9917,2971,8069,1744],function(){return e(e.s=6478)}),_N_E=e.O()}]);