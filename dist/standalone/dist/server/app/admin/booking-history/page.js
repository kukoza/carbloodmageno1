(()=>{var e={};e.id=9049,e.ids=[9049],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},98881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=t(50482),r=t(69108),i=t(62563),l=t.n(i),n=t(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["admin",{children:["booking-history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,77239)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\booking-history\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,14357)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\booking-history\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,17615)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15438)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\booking-history\\page.tsx"],m="/admin/booking-history/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/booking-history/page",pathname:"/admin/booking-history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44618:(e,s,t)=>{Promise.resolve().then(t.bind(t,53403))},53403:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(95344),r=t(3729),i=t(56506),l=t(16212),n=t(61351),o=t(69436),d=t(42739),c=t(66138),m=t(37121),x=t(52175),u=t(28765),h=t(17418),p=t(55794),f=t(92549),g=t(17470),j=t(16026),b=t(63954),N=t(57341),y=t(25092),v=t(14269);function w(){let[e,s]=(0,r.useState)(""),[t,w]=(0,r.useState)("ทั้งหมด");(0,j.a)("(max-width: 768px)");let[k,Z]=(0,r.useState)([]),[_,C]=(0,r.useState)(!0),[P,L]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async function(){try{C(!0);let e=await fetch("/api/booking-history");if(!e.ok)throw Error("Failed to fetch booking history");let s=await e.json();Z(s)}catch(e){console.error("Error loading booking history:",e),L("ไม่สามารถโหลดข้อมูลประวัติการจองได้ กรุณาลองใหม่อีกครั้ง"),(0,y.Am)({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลประวัติการจองได้",variant:"destructive"})}finally{C(!1)}})()},[]);let q=e=>new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}),S=[...new Set(k.map(e=>e.car.name))],R=k.filter(s=>{let a=s.user.name.toLowerCase().includes(e.toLowerCase())||s.car.name.toLowerCase().includes(e.toLowerCase())||s.car.licensePlate.toLowerCase().includes(e.toLowerCase())||s.destination&&s.destination.toLowerCase().includes(e.toLowerCase()),r="ทั้งหมด"===t||s.car.name===t;return a&&r}),E=R.reduce((e,s)=>e+(s.mileageDiff||0),0),z=R.length;return _?a.jsx("div",{className:"p-4 flex items-center justify-center h-[50vh]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(d.Z,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("p",{children:"กำลังโหลดข้อมูล..."})]})}):P?(0,a.jsxs)("div",{className:"p-4 max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"ประวัติการจอง"}),a.jsx("p",{className:"text-muted-foreground",children:"ประวัติการจองรถที่คืนแล้วและสรุปเลขไมล์"})]}),a.jsx(n.Zb,{children:a.jsx(n.aY,{className:"py-10 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(c.Z,{className:"h-8 w-8 text-destructive"}),a.jsx("p",{className:"text-destructive",children:P}),a.jsx(l.z,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"ลองใหม่อีกครั้ง"})]})})})]}):(0,a.jsxs)("div",{className:"p-4 pt-6 max-w-5xl mx-auto",children:[a.jsx(v.x,{}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"ประวัติการจอง"}),a.jsx("p",{className:"text-muted-foreground",children:"ประวัติการจองรถที่คืนแล้วและสรุปเลขไมล์"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)(n.Zb,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 border-blue-200 dark:border-blue-800",children:[a.jsx(n.Ol,{className:"pb-2",children:(0,a.jsxs)(n.ll,{className:"text-base flex items-center gap-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),"จำนวนการจองทั้งหมด"]})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[z," รายการ"]})})]}),(0,a.jsxs)(n.Zb,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 border-green-200 dark:border-green-800",children:[a.jsx(n.Ol,{className:"pb-2",children:(0,a.jsxs)(n.ll,{className:"text-base flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-4 w-4"}),"ระยะทางรวมทั้งหมด"]})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[E.toLocaleString()," กม."]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(f.I,{placeholder:"ค้นหาประวัติการจอง...",className:"pl-9",value:e,onChange:e=>s(e.target.value)})]}),(0,a.jsxs)(g.Ph,{value:t,onValueChange:w,children:[a.jsx(g.i4,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(h.Z,{className:"mr-2 h-4 w-4"}),a.jsx(g.ki,{placeholder:"กรองตามรถ"})]})}),(0,a.jsxs)(g.Bw,{children:[a.jsx(g.Ql,{value:"ทั้งหมด",children:"ทั้งหมด"}),S.map(e=>a.jsx(g.Ql,{value:e,children:e},e))]})]})]}),a.jsx("div",{className:"space-y-3",children:R.length>0?R.map(e=>a.jsx(n.Zb,{className:"overflow-hidden hover:bg-muted/50 transition-colors",children:(0,a.jsxs)(n.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(b.qE,{className:"h-10 w-10",children:[a.jsx(b.F$,{src:e.user.avatar,alt:e.user.name}),a.jsx(b.Q5,{children:e.user.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:e.user.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:e.user.department})]})]}),a.jsx(o.C,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:e.status})]}),(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:e.car.name}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",e.car.licensePlate,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:[q(e.startDate)," - ",q(e.endDate)]})]})]}),a.jsx(N.Z,{className:"my-3"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"เลขไมล์เริ่มต้น"}),(0,a.jsxs)("div",{className:"font-medium",children:[e.startMileage.toLocaleString()," กม."]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"เลขไมล์สิ้นสุด"}),(0,a.jsxs)("div",{className:"font-medium",children:[e.endMileage.toLocaleString()," กม."]})]})]}),(0,a.jsxs)("div",{className:"mt-3 p-2 bg-muted/50 rounded-md",children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:["ระยะทางที่ใช้: ",e.mileageDiff.toLocaleString()," กม."]}),e.fuelLevel&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"ระดับน้ำมัน:"})," ",e.fuelLevel]}),e.notes&&(0,a.jsxs)("div",{className:"text-sm mt-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"หมายเหตุ:"})," ",e.notes]})]}),a.jsx("div",{className:"mt-4",children:a.jsx(i.default,{href:`/admin/booking-history/${e.id}`,children:a.jsx(l.z,{variant:"outline",className:"w-full md:w-auto",children:"ดูรายละเอียดเพิ่มเติม"})})})]})},e.id)):a.jsx(n.Zb,{children:a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-center text-muted-foreground",children:"ไม่พบประวัติการจองที่ตรงกับเงื่อนไขการค้นหา"})})})})]})}},92549:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var a=t(95344),r=t(3729),i=t(91626);let l=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));l.displayName="Input"},17470:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>p,Ph:()=>c,Ql:()=>f,i4:()=>x,ki:()=>m});var a=t(95344),r=t(3729),i=t(63646),l=t(25390),n=t(12704),o=t(62312),d=t(91626);let c=i.fC;i.ZA;let m=i.B4,x=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(i.JO,{asChild:!0,children:a.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=i.xz.displayName;let u=r.forwardRef(({className:e,...s},t)=>a.jsx(i.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(n.Z,{className:"h-4 w-4"})}));u.displayName=i.u_.displayName;let h=r.forwardRef(({className:e,...s},t)=>a.jsx(i.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(l.Z,{className:"h-4 w-4"})}));h.displayName=i.$G.displayName;let p=r.forwardRef(({className:e,children:s,position:t="popper",...r},l)=>a.jsx(i.h_,{children:(0,a.jsxs)(i.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(u,{}),a.jsx(i.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(h,{})]})}));p.displayName=i.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(i.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=i.__.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(o.Z,{className:"h-4 w-4"})})}),a.jsx(i.eT,{children:s})]}));f.displayName=i.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(i.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.Z0.displayName},17418:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},28765:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},77239:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let a=(0,t(86843).createProxy)(String.raw`C:\xampp\htdocs\car-booking-system-110\car-booking-system-110\app\admin\booking-history\page.tsx`),{__esModule:r,$$typeof:i}=a,l=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,1227,1476,2518,9135,3411,896,3390,2025,5280,5279,3030],()=>t(98881));module.exports=a})();