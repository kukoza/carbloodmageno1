(()=>{var e={};e.id=919,e.ids=[919],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},94565:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=t(50482),i=t(69108),r=t(62563),n=t.n(r),l=t(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["admin",{children:["bookings",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,18601)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\bookings\\[id]\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,22767)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\bookings\\[id]\\loading.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,28870)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\bookings\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,17615)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15438)),"C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\xampp\\htdocs\\car-booking-system-110\\car-booking-system-110\\app\\admin\\bookings\\[id]\\page.tsx"],m="/admin/bookings/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/bookings/[id]/page",pathname:"/admin/bookings/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77495:(e,s,t)=>{Promise.resolve().then(t.bind(t,51498))},51498:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(95344),i=t(3729),r=t(8428),n=t(16212),l=t(61351),o=t(69436),d=t(42739),c=t(71532),m=t(18822),x=t(52175),h=t(55794),p=t(80508),u=t(62312),g=t(14513),f=t(16026),j=t(63954),v=t(57341),b=t(93601),y=t(1586),N=t(25092),k=t(14269);function w({params:e}){let s=(0,r.useRouter)();(0,f.a)("(max-width: 768px)");let[t,w]=(0,i.useState)(null),[Z,P]=(0,i.useState)(!1),[C,_]=(0,i.useState)(""),[S,q]=(0,i.useState)(!1),[z,E]=(0,i.useState)(!0),[A,M]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async function(){try{E(!0);let s=await fetch(`/api/bookings/${e.id}`);if(!s.ok)throw Error("Failed to fetch booking details");let t=await s.json();w(t)}catch(e){console.error("Error loading booking details:",e),M("ไม่สามารถโหลดข้อมูลการจองได้ กรุณาลองใหม่อีกครั้ง")}finally{E(!1)}})()},[e.id]);let T=e=>new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}),D=async()=>{if(t){q(!0);try{let e=await fetch("/api/auth/me");if(!e.ok)throw Error("Failed to fetch user data");let s=await e.json(),a=await fetch(`/api/bookings/${t.id}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approvedBy:s.id})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to approve booking")}(0,N.Am)({title:"อนุมัติการจองสำเร็จ",description:"การจองได้รับการอนุมัติเรียบร้อยแล้ว"}),w({...t,status:"อนุมัติแล้ว"})}catch(e){console.error("Error approving booking:",e),(0,N.Am)({title:"เกิดข้อผิดพลาด",description:e.message||"ไม่สามารถอนุมัติการจองได้ กรุณาลองใหม่อีกครั้ง",variant:"destructive"})}finally{q(!1)}}},R=async()=>{if(t){if(!C.trim()){(0,N.Am)({title:"กรุณาระบุเหตุผล",description:"กรุณาระบุเหตุผลในการปฏิเสธการจอง",variant:"destructive"});return}q(!0);try{let e=await fetch(`/api/bookings/${t.id}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:C})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to reject booking")}(0,N.Am)({title:"ปฏิเสธการจองสำเร็จ",description:"การจองได้รับการปฏิเสธเรียบร้อยแล้ว"}),w({...t,status:"ปฏิเสธ"}),P(!1)}catch(e){console.error("Error rejecting booking:",e),(0,N.Am)({title:"เกิดข้อผิดพลาด",description:e.message||"ไม่สามารถปฏิเสธการจองได้ กรุณาลองใหม่อีกครั้ง",variant:"destructive"})}finally{q(!1)}}};return z?a.jsx("div",{className:"p-4 flex items-center justify-center h-[50vh]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(d.Z,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("p",{children:"กำลังโหลดข้อมูล..."})]})}):A||!t?a.jsx("div",{className:"p-4 max-w-5xl mx-auto",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,a.jsxs)(n.z,{variant:"ghost",size:"icon",onClick:()=>s.push("/admin/bookings"),className:"h-8 w-8",children:[a.jsx(c.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"กลับ"})]}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"ไม่พบข้อมูลการจอง"}),a.jsx("p",{className:"text-muted-foreground",children:A||"ไม่พบข้อมูลการจองที่ต้องการ"})]})]})}):(0,a.jsxs)("div",{className:"p-4 pb-20 max-w-5xl mx-auto",children:[a.jsx(k.x,{}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,a.jsxs)(n.z,{variant:"ghost",size:"icon",onClick:()=>s.push("/admin/bookings"),className:"h-8 w-8",children:[a.jsx(c.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"กลับ"})]}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"รายละเอียดการจอง"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["ID: ",e.id]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx(o.C,{variant:"อนุมัติแล้ว"===t.status?"default":"รออนุมัติ"===t.status?"outline":"destructive",className:"text-sm px-3 py-1",children:t.status}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["สร้างเมื่อ: ",new Date(t.createdAt).toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-lg flex items-center gap-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),"ข้อมูลผู้จอง"]})}),(0,a.jsxs)(l.aY,{className:"pt-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsxs)(j.qE,{className:"h-12 w-12",children:[a.jsx(j.F$,{src:t.user.avatar||"/placeholder.svg?height=48&width=48",alt:t.user.name}),a.jsx(j.Q5,{children:t.user.name.charAt(0)})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium text-lg",children:t.user.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:t.user.department})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"อีเมล"}),a.jsx("div",{children:t.user.email})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"เบอร์โทรศัพท์"}),a.jsx("div",{children:t.user.phone||"-"})]})]})]})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-lg flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-4 w-4"}),"ข้อมูลการจอง"]})}),(0,a.jsxs)(l.aY,{className:"pt-0 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"รถ"}),(0,a.jsxs)("div",{className:"font-medium",children:[t.car.name," (",t.car.type,")"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ทะเบียน: ",t.car.licensePlate]})]}),a.jsx(v.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"วันที่"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[T(t.startDate)," - ",T(t.endDate)]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"เวลา"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[t.startTime," - ",t.endTime," น."]})]})]}),t.destination&&(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"สถานที่"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:t.destination})]})]}),a.jsx(v.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"วัตถุประสงค์"}),a.jsx("p",{children:t.purpose})]})]})]}),"รออนุมัติ"===t.status&&(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{className:"pb-2",children:a.jsx(l.ll,{className:"text-lg",children:"การดำเนินการ"})}),a.jsx(l.aY,{className:"pt-0",children:Z?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(y._,{htmlFor:"rejectReason",children:"เหตุผลในการปฏิเสธ"}),a.jsx(b.g,{id:"rejectReason",placeholder:"ระบุเหตุผลในการปฏิเสธคำขอจองรถนี้",value:C,onChange:e=>_(e.target.value),className:"min-h-[100px]"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[a.jsx(n.z,{variant:"destructive",className:"h-12 text-base",onClick:R,disabled:S,children:S?"กำลังดำเนินการ...":"ยืนยันการปฏิเสธ"}),a.jsx(n.z,{variant:"outline",className:"h-12 text-base",onClick:()=>P(!1),children:"ยกเลิก"})]})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(n.z,{className:"h-12 text-base flex items-center gap-2",onClick:D,disabled:S,children:[a.jsx(u.Z,{className:"h-5 w-5"}),S?"กำลังดำเนินการ...":"อนุมัติคำขอ"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"h-12 text-base flex items-center gap-2",onClick:()=>P(!0),children:[a.jsx(g.Z,{className:"h-5 w-5"}),"ปฏิเสธคำขอ"]})]})})]})]})]})}},1586:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(95344),i=t(3729),r=t(14217),n=t(49247),l=t(91626);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...s},t)=>a.jsx(r.f,{ref:t,className:(0,l.cn)(o(),e),...s}));d.displayName=r.f.displayName},57341:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var a=t(95344),i=t(3729),r=t(62409),n="horizontal",l=["horizontal","vertical"],o=i.forwardRef((e,s)=>{let{decorative:t,orientation:i=n,...o}=e,d=l.includes(i)?i:n;return(0,a.jsx)(r.WV.div,{"data-orientation":d,...t?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:s})});o.displayName="Separator";var d=t(91626);let c=i.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...i},r)=>a.jsx(o,{ref:r,decorative:t,orientation:s,className:(0,d.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...i}));c.displayName=o.displayName},93601:(e,s,t)=>{"use strict";t.d(s,{g:()=>n});var a=t(95344),i=t(3729),r=t(91626);let n=i.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));n.displayName="Textarea"},62312:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},71532:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},42739:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},80508:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},18822:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},22767:(e,s,t)=>{"use strict";function a(){return null}t.r(s),t.d(s,{default:()=>a})},18601:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`C:\xampp\htdocs\car-booking-system-110\car-booking-system-110\app\admin\bookings\[id]\page.tsx`),{__esModule:i,$$typeof:r}=a,n=a.default},14217:(e,s,t)=>{"use strict";t.d(s,{f:()=>l});var a=t(3729),i=t(62409),r=t(95344),n=a.forwardRef((e,s)=>(0,r.jsx)(i.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var l=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,1227,1476,2518,9135,3411,896,3390,2025,5279,7967],()=>t(94565));module.exports=a})();