(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6948],{8147:function(e,s,a){Promise.resolve().then(a.bind(a,2762))},2762:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(3827),n=a(4090),i=a(7907),l=a(2874),c=a.n(l),r=a(5561),d=a(6619),o=a(2220),m=a(2209);function x(){let[e,s]=(0,n.useState)(null),[a,l]=(0,n.useState)(!0),[x,h]=(0,n.useState)(null),f=(0,n.useRef)(null),j=(0,n.useRef)(null),u=(0,i.useParams)().id,[b,p]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=async()=>{try{l(!0),h(null);let e=await fetch("/api/share/business-card/".concat(u));if(console.log("API response status:",e.status),!e.ok){let s=await e.json();throw console.error("API error:",s),Error(s.error||"Failed to fetch business card")}let a=await e.json();if(console.log("Shared business card data:",a),s(a),a.id){let e=window.location.origin;p("".concat(e,"/share/business-card/").concat(a.id))}}catch(e){console.error("Error loading shared business card:",e),h("Failed to load business card. The card may not exist or has been removed.")}finally{l(!1)}};u&&e()},[u]);let g=async()=>{if(j.current)try{let e=(await c()(j.current,{scale:2,backgroundColor:null,width:850,height:500,windowWidth:850,windowHeight:500})).toDataURL("image/png"),s=document.createElement("a");s.href=e,s.download="business-card.png",s.click()}catch(e){console.error("Error generating image:",e),alert("Failed to download business card image. Please try again.")}},N=e=>["BEGIN:VCARD","VERSION:3.0","N:".concat(e.name_en),"FN:".concat(e.name_en),"ORG:".concat(e.company_en).concat(e.department_en?";".concat(e.department_en):""),"TITLE:".concat(e.position_en),"TEL;TYPE=CELL:".concat(e.tel),"TEL;TYPE=WORK:".concat(e.company_tel),e.fax?"TEL;TYPE=FAX:".concat(e.fax):"","EMAIL:".concat(e.email),e.website?"URL:".concat(e.website):"","ADR;TYPE=WORK:;;".concat("Nozomi Enterprise (Thailand) Co., Ltd.382 M.4, Baanklongsuan Rd., Phrasamutjedei,Samut Prakan, Thailand 10290"),e.line_id?"X-LINE:".concat(e.line_id):"",e.facebook?"X-FACEBOOK:".concat(e.facebook):"",e.name_th?"X-NAME-TH:".concat(e.name_th):"",e.position_th?"X-POSITION-TH:".concat(e.position_th):"",e.company_th?"X-COMPANY-TH:".concat(e.company_th):"","END:VCARD"].filter(e=>""!==e).join("\n"),v=e=>e.startsWith("+66")?"0"+e.substring(3).replace(/\s/g,"-"):e.replace(/\s/g,"-"),w=e=>e.replace("/",", ");return a?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):x?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center py-10 max-w-md mx-auto",children:[(0,t.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"⚠️"}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Business Card Not Found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:x})]})}):e?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h2",{className:"text-xl font-semibold text-center md:text-left",children:"Business Card"})}),(0,t.jsx)("div",{className:"relative mx-auto flex justify-center",style:{width:"100%"},children:(0,t.jsxs)("div",{id:"business-card",ref:f,className:"bg-white rounded-lg shadow-lg overflow-hidden",style:{width:"380px",height:"240px",padding:"15px",boxSizing:"border-box",position:"relative",fontFamily:"Arial, sans-serif"},children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("div",{className:"w-9 h-9 mr-2",children:(0,t.jsx)("img",{src:"/images/nozomi-logo.png",alt:"Nozomi Logo",className:"w-full h-full object-contain"})}),(0,t.jsx)("div",{className:"text-xs font-bold leading-tight",children:e.company_en})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-xs font-medium",children:e.name_th}),(0,t.jsx)("div",{className:"text-xs font-bold text-blue-900",children:e.name_en}),e.position_en&&(0,t.jsx)("div",{className:"text-xs italic",children:e.position_en})]}),(0,t.jsxs)("div",{className:"text-[10px] space-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"font-semibold mr-1",children:"Mobile :"}),(0,t.jsx)("span",{children:v(e.tel)})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"font-semibold mr-1",children:"E-mail :"}),(0,t.jsx)("span",{children:e.email})]})]}),(0,t.jsx)("div",{className:"absolute right-2 top-14",children:(0,t.jsx)("div",{className:"w-20 h-14",children:(0,t.jsx)("img",{src:"/images/urs-certification-new.png",alt:"URS Certification",className:"w-full h-full object-contain"})})}),(0,t.jsxs)("div",{className:"text-[10px] mt-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Head Office : "}),(0,t.jsx)("span",{style:{whiteSpace:"pre-line"},children:w(e.address_en)})]}),(0,t.jsxs)("div",{children:["Tel : ",e.company_tel," Fax : ",e.fax]}),(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Branch 1 : "}),(0,t.jsx)("span",{style:{whiteSpace:"pre-line"},children:w(e.branch_address_en)})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex flex-col items-center",children:[(0,t.jsx)(m.ZP,{value:b,size:60,renderAs:"svg",includeMargin:!1}),(0,t.jsx)("div",{className:"text-[8px] text-green-600 font-semibold mt-0.5",children:"Scan to view"})]})]})})]}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Actions"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("button",{onClick:g,className:"flex items-center justify-center p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[(0,t.jsx)(r.Z,{className:"h-5 w-5 mr-2"}),"Save image"]}),(0,t.jsxs)("button",{onClick:()=>{if(e)try{let s=N(e),a=new Blob([s],{type:"text/vcard;charset=utf-8"}),t=URL.createObjectURL(a),n=document.createElement("a");n.href=t,n.download="".concat(e.name_en.replace(/\s+/g,"_"),".vcf"),n.click(),URL.revokeObjectURL(t)}catch(e){console.error("Error generating vCard:",e),alert("Failed to download vCard. Please try again.")}},className:"flex items-center justify-center p-3 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Save vCard"]}),(0,t.jsxs)("button",{onClick:()=>{window.open("https://maps.app.goo.gl/Tf29bSF2sKxbS7NYA","_blank")},className:"flex items-center justify-center p-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Google Map"]})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Business Card Information"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Size:"})," 95mm x 60mm"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Format:"})," PNG image"]})]})]})}),(0,t.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:(0,t.jsxs)("div",{id:"hidden-business-card",ref:j,className:"bg-white overflow-hidden",style:{width:"".concat(850,"px"),height:"".concat(500,"px"),padding:"30px",boxSizing:"border-box",position:"relative",fontFamily:"Arial, sans-serif"},children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 mr-4",children:(0,t.jsx)("img",{src:"/images/nozomi-logo.png",alt:"Nozomi Logo",className:"w-full h-full object-contain"})}),(0,t.jsx)("div",{className:"text-3xl font-bold leading-tight",children:e.company_en})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-xl font-medium",children:e.name_th}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:e.name_en}),e.position_en&&(0,t.jsx)("div",{className:"text-xl italic",children:e.position_en})]}),(0,t.jsxs)("div",{className:"text-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"font-semibold mr-2",children:"Mobile :"}),(0,t.jsx)("span",{children:v(e.tel)})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"font-semibold mr-2",children:"E-mail :"}),(0,t.jsx)("span",{children:e.email})]})]}),(0,t.jsx)("div",{className:"absolute right-4 top-28",children:(0,t.jsx)("div",{className:"w-40 h-28",children:(0,t.jsx)("img",{src:"/images/urs-certification-new.png",alt:"URS Certification",className:"w-full h-full object-contain"})})}),(0,t.jsxs)("div",{className:"text-lg mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Head Office : "}),(0,t.jsx)("span",{style:{whiteSpace:"pre-line"},children:w(e.address_en)})]}),(0,t.jsxs)("div",{children:["Tel : ",e.company_tel," Fax : ",e.fax]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Branch 1 : "}),(0,t.jsx)("span",{style:{whiteSpace:"pre-line"},children:w(e.branch_address_en)})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col items-center",children:[(0,t.jsx)(m.ZP,{value:b,size:120,renderAs:"svg",includeMargin:!1}),(0,t.jsx)("div",{className:"text-base text-green-600 font-semibold mt-1",children:"Scan to view"})]})]})})]})})}):(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center py-10 max-w-md mx-auto",children:[(0,t.jsx)("div",{className:"text-yellow-500 text-5xl mb-4",children:"\uD83D\uDD0D"}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Business Card Not Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"The business card you're looking for doesn't exist or has been removed."})]})})}}},function(e){e.O(0,[7337,9502,2971,8069,1744],function(){return e(e.s=8147)}),_N_E=e.O()}]);