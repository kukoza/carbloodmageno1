(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{9653:function(e,a,s){Promise.resolve().then(s.bind(s,8459))},8459:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return h}});var n=s(3827),r=s(4090),t=s(7907),l=s(1657);let d=r.forwardRef((e,a)=>{let{className:s,type:r,...t}=e;return(0,n.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t})});d.displayName="Input";var o=s(4602);let i=(0,s(9769).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,n.jsx)(o.f,{ref:a,className:(0,l.cn)(i(),s),...r})});c.displayName=o.f.displayName;let u=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,n.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r})});function h(){let[e,a]=(0,r.useState)({id:null,user_id:0,name_th:"",name_en:"",position_th:"",position_en:"",department_th:"",department_en:"",company_th:"",company_en:"NOZOMI ENTERPRISE (THAILAND) CO., LTD.",branch:"Branch 1",address_th:"382 หมู่ 4 ตำบลคลองสวน",address_en:"382 M.4 Baanklongsuan,Phrasamutjede,Samutprakarn 10290 Thailand",branch_address_th:"168 หมู่ 2 ตำบลคลองสวน",branch_address_en:"168 M.2 Baanklongsuan,Phrasamutjede,Samutprakarn 10290 Thailand",tel:"",company_tel:"02-461-6291",fax:"02-461-6292",email:"",website:"",line_id:"",facebook:""}),[s,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),p=(0,t.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{l(!0),m(null);try{let e=await fetch("/api/db-update/create-business-cards-table-direct");console.log("Table creation response:",await e.json())}catch(e){console.error("Error creating table:",e)}try{let e=await fetch("/api/db-update/add-branch-company-tel-columns");console.log("Add columns response:",await e.json())}catch(e){console.error("Error adding columns:",e)}try{let e=await fetch("/api/db-update/add-branch-address-columns");console.log("Add branch address columns response:",await e.json())}catch(e){console.error("Error adding branch address columns:",e)}await new Promise(e=>setTimeout(e,1e3));let e=await fetch("/api/business-cards");if(console.log("API response status:",e.status),!e.ok){let a=await e.json();throw console.error("API error:",a),Error(a.error||"Failed to fetch business card")}let s=await e.json();console.log("Business card data:",s),s.branch||(s.branch="Branch 1"),s.company_tel||(s.company_tel="02-461-6291"),s.branch_address_th||(s.branch_address_th="168 หมู่ 2 ตำบลคลองสวน"),s.address_en||(s.address_en="382 M.4 Baanklongsuan, Phrasamutjede,Samutprakarn 10290 Thailand"),s.branch_address_en||(s.branch_address_en="168 M.2 Baanklongsuan,Phrasamutjede,Samutprakarn 10290 Thailand"),a(s)}catch(e){console.error("Error loading business card:",e),m("Failed to load business card. Please try again.")}finally{l(!1)}})()},[]);let b=e=>{let{name:s,value:n}=e.target;a(e=>({...e,[s]:n}))},f=async a=>{a.preventDefault(),i(!0),m(null);try{let a=await fetch("/api/business-cards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save business card")}p.push("/user/business-card")}catch(e){console.error("Error saving business card:",e),m("Failed to save business card. Please try again.")}finally{i(!1)}},x=async()=>{try{await fetch("/api/db-update/create-business-cards-table-direct"),p.refresh()}catch(e){console.error("Error retrying:",e)}};return s?(0,n.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?(0,n.jsxs)("div",{className:"text-center py-10",children:[(0,n.jsx)("p",{className:"text-red-500 mb-4",children:h}),(0,n.jsx)("button",{onClick:x,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try Again"})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Edit Business Card"}),h&&(0,n.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:h}),(0,n.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"name_th",children:"ชื่อ-นามสกุล (ไทย)"}),(0,n.jsx)(d,{id:"name_th",name:"name_th",value:e.name_th,onChange:b,className:"mt-1",placeholder:"อธิจิต หงส์กิตติกุล"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"name_en",children:"Name (English)"}),(0,n.jsx)(d,{id:"name_en",name:"name_en",value:e.name_en,onChange:b,className:"mt-1",placeholder:"Athijit Hongkittikul"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"position_th",children:"ตำแหน่ง (ไทย)"}),(0,n.jsx)(d,{id:"position_th",name:"position_th",value:e.position_th,onChange:b,className:"mt-1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"position_en",children:"Position (English)"}),(0,n.jsx)(d,{id:"position_en",name:"position_en",value:e.position_en,onChange:b,className:"mt-1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"company_en",children:"Company (English)"}),(0,n.jsx)(d,{id:"company_en",name:"company_en",value:e.company_en,onChange:b,className:"mt-1"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(c,{htmlFor:"address_en",children:"Head Office Address (English)"}),(0,n.jsx)(u,{id:"address_en",name:"address_en",value:e.address_en,onChange:b,className:"mt-1",rows:2,placeholder:"382 M.4 Baanklongsuan, Phrasamutjede, Samutprakarn 10290 Thailand"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(c,{htmlFor:"branch_address_en",children:"Branch Address (English)"}),(0,n.jsx)(u,{id:"branch_address_en",name:"branch_address_en",value:e.branch_address_en,onChange:b,className:"mt-1",rows:2,placeholder:"168 M.2 Baanklongsuan, Phrasamutjede, Samutprakarn 10290 Thailand"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"tel",children:"เบอร์โทรศัพท์มือถือ"}),(0,n.jsx)(d,{id:"tel",name:"tel",value:e.tel,onChange:b,className:"mt-1",placeholder:"098-930-3139"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"company_tel",children:"เบอร์โทรบริษัท"}),(0,n.jsx)(d,{id:"company_tel",name:"company_tel",value:e.company_tel,onChange:b,className:"mt-1",placeholder:"02-461-6291"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"fax",children:"แฟกซ์"}),(0,n.jsx)(d,{id:"fax",name:"fax",value:e.fax,onChange:b,className:"mt-1",placeholder:"02-461-6292"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{htmlFor:"email",children:"อีเมล"}),(0,n.jsx)(d,{id:"email",name:"email",value:e.email,onChange:b,className:"mt-1",placeholder:"gglike21@gmail.com"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,n.jsx)("button",{type:"button",onClick:()=>p.push("/user/business-card"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:o?"Saving...":"Save"})]})]})]})}u.displayName="Textarea"},1657:function(e,a,s){"use strict";s.d(a,{cn:function(){return t}});var n=s(3167),r=s(1367);function t(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.m6)((0,n.W)(a))}},7907:function(e,a,s){"use strict";var n=s(5313);s.o(n,"useParams")&&s.d(a,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(a,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(a,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(a,{useSearchParams:function(){return n.useSearchParams}})},4602:function(e,a,s){"use strict";s.d(a,{f:function(){return d}});var n=s(4090),r=s(9586),t=s(3827),l=n.forwardRef((e,a)=>(0,t.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var d=l}},function(e){e.O(0,[4894,2971,8069,1744],function(){return e(e.s=9653)}),_N_E=e.O()}]);