(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{6500:function(e,s,t){Promise.resolve().then(t.bind(t,4338))},4338:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var l=t(3827),a=t(4090),r=t(7907),c=t(8792),n=t(5546),i=t(684),o=t(1652),d=t(5754),u=t(5179),h=t(9842),m=t(7815),x=t(7788),f=t(8973);function p(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)(),[t,p]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[g,N]=(0,a.useState)(!1),[b,w]=(0,a.useState)("");(0,a.useEffect)(()=>{"true"===s.get("logout")&&(0,x.Am)({title:"ออกจากระบบสำเร็จ",description:"คุณได้ออกจากระบบเรียบร้อยแล้ว"})},[s]);let v=async s=>{if(s.preventDefault(),w(""),k()){N(!0);try{console.log("กำลังพยายามเข้าสู่ระบบด้วย:",{email:t});let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:j}),credentials:"include"});console.log("สถานะการตอบกลับ:",s.status);let l=await s.json();if(console.log("ข้อมูลการตอบกลับ:",l),!s.ok)throw Error(l.error||"เกิดข้อผิดพลาดในการเข้าสู่ระบบ");"ผู้ดูแลระบบ"===l.user.role?(console.log("กำลังนำทางไปยังแดชบอร์ดผู้ดูแลระบบ"),e.push("/admin/dashboard")):(console.log("กำลังนำทางไปยังแดชบอร์ดผู้ใช้"),e.push("/user/dashboard"))}catch(e){console.error("เกิดข้อผิดพลาดในการเข้าสู่ระบบ:",e),w(e.message||"อีเมลหรือรหัสผ่านไม่ถูกต้อง")}finally{N(!1)}}},k=()=>{let e=!0,s={};return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(s.email="กรุณากรอกอีเมลให้ถูกต้อง",e=!1):(s.email="กรุณากรอกอีเมล",e=!1),j?j.length<6&&(s.password="รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร",e=!1):(s.password="กรุณากรอกรหัสผ่าน",e=!1),w(Object.values(s).join("\n")||""),e};return(0,l.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100",children:[(0,l.jsx)(f.x,{}),(0,l.jsxs)(m.Zb,{className:"w-full max-w-md",children:[(0,l.jsxs)(m.Ol,{className:"space-y-1 flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-2",children:(0,l.jsx)(n.Z,{className:"h-6 w-6 text-blue-600"})}),(0,l.jsx)(m.ll,{className:"text-2xl font-bold text-center",children:"เข้าสู่ระบบ"}),(0,l.jsx)(m.SZ,{className:"text-center",children:"เข้าสู่ระบบจองรถ Nozomi Enterprise"})]}),(0,l.jsx)(m.aY,{children:(0,l.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(h._,{htmlFor:"email",className:"flex items-center gap-2",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4"}),"อีเมล"]}),(0,l.jsx)(u.I,{id:"email",type:"email",placeholder:"กรอกอีเมล",value:t,onChange:e=>p(e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(h._,{htmlFor:"password",className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"h-4 w-4"}),"รหัสผ่าน"]}),(0,l.jsx)(u.I,{id:"password",type:"password",placeholder:"กรอกรหัสผ่าน",value:j,onChange:e=>y(e.target.value),required:!0})]}),b&&(0,l.jsx)("div",{className:"bg-red-100 text-red-600 text-sm p-3 rounded-md",children:b}),(0,l.jsx)(d.z,{type:"submit",disabled:g,className:"w-full",children:g?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]})}),(0,l.jsx)(m.eW,{className:"flex justify-center",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["ยังไม่มีบัญชี?"," ",(0,l.jsx)(c.default,{href:"/register",className:"text-blue-600 hover:underline",children:"ลงทะเบียน"})]})})]})]})}},5546:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(7461).Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])}},function(e){e.O(0,[4894,613,6111,2776,5250,1378,2971,8069,1744],function(){return e(e.s=6500)}),_N_E=e.O()}]);