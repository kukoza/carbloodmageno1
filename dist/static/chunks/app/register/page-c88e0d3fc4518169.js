(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011],{3608:function(e,s,a){Promise.resolve().then(a.bind(a,5262))},5262:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var t=a(3827),r=a(4090),l=a(7907),n=a(8792),i=a(5754),d=a(7815),c=a(5179),o=a(9842),m=a(5509),h=a(7366),u=a(9108),p=a(1213),x=a(684),f=a(7326),j=a(1652),w=a(7788),N=a(8973);function y(){let e=(0,l.useRouter)();(0,h.a)("(max-width: 768px)");let[s,a]=(0,r.useState)({name:"",email:"",password:"",confirmPassword:"",department:""}),[y,v]=(0,r.useState)(!1),[g,b]=(0,r.useState)({}),k=e=>{let{name:s,value:t}=e.target;a(e=>({...e,[s]:t})),g[s]&&b(e=>{let a={...e};return delete a[s],a})},Z=()=>{let e=!0,a={};return s.name.trim()?s.name.length<2&&(a.name="ชื่อต้องมีความยาวอย่างน้อย 2 ตัวอักษร",e=!1):(a.name="กรุณากรอกชื่อ",e=!1),s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="กรุณากรอกอีเมลให้ถูกต้อง",e=!1):(a.email="กรุณากรอกอีเมล",e=!1),s.password?s.password.length<6&&(a.password="รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร",e=!1):(a.password="กรุณากรอกรหัสผ่าน",e=!1),s.confirmPassword?s.password!==s.confirmPassword&&(a.confirmPassword="รหัสผ่านไม่ตรงกัน",e=!1):(a.confirmPassword="กรุณายืนยันรหัสผ่าน",e=!1),s.department||(a.department="กรุณาเลือกแผนก",e=!1),b(a),e},P=async a=>{if(a.preventDefault(),Z()){v(!0);try{let a=await fetch("/api/auth/check-email?email=".concat(encodeURIComponent(s.email)));if((await a.json()).exists){b({email:"อีเมลนี้ถูกใช้งานแล้ว กรุณาใช้อีเมลอื่น"});return}let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,email:s.email,password:s.password,department:s.department})}),r=await t.json();if(!t.ok)throw Error(r.error||"เกิดข้อผิดพลาดในการลงทะเบียน");(0,w.Am)({title:"ลงทะเบียนสำเร็จ",description:"กรุณาเข้าสู่ระบบเพื่อใช้งาน"}),e.push("/login?registered=true")}catch(e){console.error("Registration error:",e),b({form:e.message||"เกิดข้อผิดพลาดในการลงทะเบียน กรุณาลองใหม่อีกครั้ง"})}finally{v(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-muted/30",children:[(0,t.jsx)(N.x,{}),(0,t.jsxs)(d.Zb,{className:"w-full max-w-md",children:[(0,t.jsxs)(d.Ol,{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.z,{variant:"ghost",size:"icon",onClick:()=>e.push("/login"),className:"h-8 w-8",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"กลับ"})]}),(0,t.jsx)(d.ll,{className:"text-2xl",children:"ลงทะเบียน"})]}),(0,t.jsx)(d.SZ,{children:"สร้างบัญชีใหม่เพื่อใช้งานระบบจองรถ Nozomi Enterprise"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"name",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),"ชื่อ-นามสกุล"]})}),(0,t.jsx)(c.I,{id:"name",name:"name",placeholder:"กรอกชื่อ-นามสกุล",value:s.name,onChange:k,className:g.name?"border-destructive":""}),g.name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:g.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"email",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),"อีเมล"]})}),(0,t.jsx)(c.I,{id:"email",name:"email",type:"email",placeholder:"กรอกอีเมล",value:s.email,onChange:k,className:g.email?"border-destructive":""}),g.email&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:g.email})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"department",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"แผนก"]})}),(0,t.jsxs)(m.Ph,{value:s.department,onValueChange:e=>{a(s=>({...s,department:e})),g.department&&b(e=>{let s={...e};return delete s.department,s})},children:[(0,t.jsx)(m.i4,{className:g.department?"border-destructive":"",children:(0,t.jsx)(m.ki,{placeholder:"แผนก/ฝ่าย"})}),(0,t.jsxs)(m.Bw,{children:[(0,t.jsx)(m.Ql,{value:"PD",children:"PD"}),(0,t.jsx)(m.Ql,{value:"DL",children:"DL"}),(0,t.jsx)(m.Ql,{value:"PU",children:"PU"}),(0,t.jsx)(m.Ql,{value:"MK",children:"MK"}),(0,t.jsx)(m.Ql,{value:"SEC",children:"SEC"}),(0,t.jsx)(m.Ql,{value:"ACC",children:"ACC"}),(0,t.jsx)(m.Ql,{value:"QA",children:"QA"}),(0,t.jsx)(m.Ql,{value:"HR",children:"HR"}),(0,t.jsx)(m.Ql,{value:"ST",children:"ST"}),(0,t.jsx)(m.Ql,{value:"MT",children:"MT"}),(0,t.jsx)(m.Ql,{value:"IT",children:"IT"})]})]}),g.department&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:g.department})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"password",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4"}),"รหัสผ่าน"]})}),(0,t.jsx)(c.I,{id:"password",name:"password",type:"password",placeholder:"กรอกรหัสผ่าน",value:s.password,onChange:k,className:g.password?"border-destructive":""}),g.password&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:g.password})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"confirmPassword",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4"}),"ยืนยันรหัสผ่าน"]})}),(0,t.jsx)(c.I,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"กรอกรหัสผ่านอีกครั้ง",value:s.confirmPassword,onChange:k,className:g.confirmPassword?"border-destructive":""}),g.confirmPassword&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:g.confirmPassword})]}),g.form&&(0,t.jsx)("div",{className:"bg-destructive/10 text-destructive text-sm p-3 rounded-md",children:g.form}),(0,t.jsx)(i.z,{type:"submit",className:"w-full",disabled:y,children:y?"กำลังลงทะเบียน...":"ลงทะเบียน"})]})}),(0,t.jsx)(d.eW,{className:"flex justify-center",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["มีบัญชีอยู่แล้ว?"," ",(0,t.jsx)(n.default,{href:"/login",className:"text-primary hover:underline",children:"เข้าสู่ระบบ"})]})})]})]})}},5509:function(e,s,a){"use strict";a.d(s,{Bw:function(){return x},Ph:function(){return o},Ql:function(){return f},i4:function(){return h},ki:function(){return m}});var t=a(3827),r=a(4090),l=a(8161),n=a(3441),i=a(5159),d=a(9259),c=a(1657);let o=l.fC;l.ZA;let m=l.B4,h=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(l.JO,{asChild:!0,children:(0,t.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=l.xz.displayName;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});u.displayName=l.u_.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});p.displayName=l.$G.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsxs)(l.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,t.jsx)(u,{}),(0,t.jsx)(l.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(p,{})]})})});x.displayName=l.VY.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.__.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.wU,{children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(l.eT,{children:r})]})});f.displayName=l.ck.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.Z0.displayName},7366:function(e,s,a){"use strict";a.d(s,{a:function(){return r}});var t=a(4090);function r(e){let[s,a]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let s=window.matchMedia(e),t=e=>a(e.matches);return a(s.matches),s.addEventListener("change",t),()=>s.removeEventListener("change",t)},[e]),s}},7326:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7461).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9108:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1213:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[4894,613,6111,2776,9137,5250,2028,1378,2971,8069,1744],function(){return e(e.s=3608)}),_N_E=e.O()}]);